# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Docker –¥–ª—è Elia Platform

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cp .env.example .env
```

–ï—Å–ª–∏ `.env.example` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ `.env` –≤—Ä—É—á–Ω—É—é —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```env
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite+aiosqlite:///./data/elia.db

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
HOST=0.0.0.0
PORT=8000
DEBUG=false

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
UPLOAD_DIR=static/uploads
MAX_UPLOAD_SIZE=52428800

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
APP_NAME=Elia AI Platform
VERSION=1.0.0

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_DIR=logs
LOG_RETENTION_DAYS=30

# OpenAI API
OPENAI_API_KEY=–≤–∞—à-–∫–ª—é—á-openai
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4
```

### 2. –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞

```bash
docker-compose build
```

–ò–ª–∏ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏:

```bash
docker-compose build --no-cache
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker-compose up -d
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤:

```bash
docker-compose up
```

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker-compose down
```

## üìÅ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è Docker

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volumes –≤ `docker-compose.yml`:

```yaml
volumes:
  - ./data:/app/data
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- ‚úÖ –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `./data` –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **–≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–∞–Ω–Ω—ã–µ **–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è**
- ‚úÖ –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å –ë–î –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î:

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –ë–î (elia.db –≤ –∫–æ—Ä–Ω–µ)

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É data, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p data

# 2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ç–µ–∫—É—â—É—é –ë–î
mv elia.db data/

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker
docker-compose up -d
```

#### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É data
mkdir -p data

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker (–ë–î —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
docker-compose up -d
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î (–º–∏–≥—Ä–∞—Ü–∏–∏)

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it elia-platform bash

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
alembic upgrade head

# –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
python -m app.database
```

#### –ë—ç–∫–∞–ø –ë–î

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏—é –ë–î
cp data/elia.db data/elia_backup_$(date +%Y%m%d_%H%M%S).db

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sqlite3
sqlite3 data/elia.db ".backup data/backup.db"
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ë–î
cp data/elia_backup_XXXXXX.db data/elia.db

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d
```

## ‚öôÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ .env –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è Docker

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–§–∞–π–ª `.env` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ä–µ–∂–∏–º–µ **read-only**:

```yaml
volumes:
  - ./.env:/app/.env:ro
```

–¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ `env_file`:

```yaml
env_file:
  - .env
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

1. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`** –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**:

```bash
docker-compose restart
```

–ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
docker-compose down
docker-compose up -d
```

**–í–∞–∂–Ω–æ:** –ë–î –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã **–Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞—é—Ç**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes!

### –ü—Ä–∏–º–µ—Ä—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:

#### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç:

```env
PORT=9000
```

```bash
docker-compose down
docker-compose up -d
```

#### –í–∫–ª—é—á–∏—Ç—å debug —Ä–µ–∂–∏–º:

```env
DEBUG=true
LOG_LEVEL=DEBUG
```

```bash
docker-compose restart
```

#### –ò–∑–º–µ–Ω–∏—Ç—å OpenAI –∫–ª—é—á:

```env
OPENAI_API_KEY=–Ω–æ–≤—ã–π-–∫–ª—é—á
```

```bash
docker-compose restart
```

## üìä –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```yaml
volumes:
  - ./data:/app/data              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  - ./static/uploads:/app/static/uploads  # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
  - ./logs:/app/logs              # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - ./.env:/app/.env:ro           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- ‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ `docker-compose down`
- ‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞
- ‚úÖ –í—ã –º–æ–∂–µ—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –õ–µ–≥–∫–æ –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã (–ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫–∏)

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
docker-compose ps
```

### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker exec -it elia-platform bash
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ health check

```bash
docker inspect elia-platform | grep -A 10 Health
```

### –û—á–∏—Å—Ç–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose down --rmi all

# –£–¥–∞–ª–∏—Ç—å volumes (‚ö†Ô∏è –£–î–ê–õ–ò–¢ –î–ê–ù–ù–´–ï!)
docker-compose down -v
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥
git pull

# 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
docker-compose build

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d

# –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏!
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose config
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–î –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ data —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
mkdir -p data

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la data/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ .env
PORT=9000

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose down
docker-compose up -d
```

## üìù PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite:

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é postgres –≤ `docker-compose.yml`
2. –ò–∑–º–µ–Ω–∏—Ç–µ `DATABASE_URL` –≤ `.env`:

```env
DATABASE_URL=postgresql+asyncpg://elia:elia_password@postgres:5432/elia
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
docker-compose down
docker-compose up -d
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env`** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ë–î** —Ä–µ–≥—É–ª—è—Ä–Ω–æ
3. **–ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ë–î** –ø—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose restart`** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π .env
5. **–õ–æ–≥–∏ —Ö—Ä–∞–Ω–∏—Ç–µ** –Ω–∞ —Ö–æ—Å—Ç–µ —á–µ—Ä–µ–∑ volume (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:8000

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl
curl http://localhost:8000/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—Ç–≤–µ—Ç: `{"status":"healthy"}`

