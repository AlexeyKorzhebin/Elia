# ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ Docker Ð´Ð»Ñ Elia Platform

## Ð¨Ð°Ð³ 1: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»

```bash
cat > .env << 'EOF'
DATABASE_URL=sqlite+aiosqlite:///./data/elia.db
HOST=0.0.0.0
PORT=8000
DEBUG=false
UPLOAD_DIR=static/uploads
MAX_UPLOAD_SIZE=52428800
APP_NAME=Elia AI Platform
VERSION=1.0.0
LOG_LEVEL=INFO
LOG_DIR=logs
LOG_RETENTION_DAYS=30
OPENAI_API_KEY=Ð²Ð°Ñˆ-ÐºÐ»ÑŽÑ‡-Ð·Ð´ÐµÑÑŒ
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4
EOF
```

## Ð¨Ð°Ð³ 2: ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÑŒÑ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸

```bash
mkdir -p data logs static/uploads
```

## Ð¨Ð°Ð³ 3: Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð°Ñ Ð‘Ð”

```bash
# ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚Ðµ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð‘Ð” Ð² Ð¿Ð°Ð¿ÐºÑƒ data
mv elia.db data/
```

## Ð¨Ð°Ð³ 4: Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Docker

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Docker Desktop (ÐµÑÐ»Ð¸ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½)

# Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð±Ñ€Ð°Ð·
docker-compose build

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker-compose up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ
curl http://localhost:8000/health
```

## ðŸ”§ ÐšÐ°Ðº Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð‘Ð•Ð— Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ¸ Docker

### Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð»ÑŽÐ±Ð¾Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€:

1. ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `.env` Ñ„Ð°Ð¹Ð»
2. Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
docker-compose restart
```

Ð˜Ð»Ð¸ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€:

```bash
docker-compose down
docker-compose up -d
```

**Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ ÐÐ• Ð¿Ð¾ÑÑ‚Ñ€Ð°Ð´Ð°ÑŽÑ‚!**

## ðŸ“ Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð‘Ð” Ð‘Ð•Ð— Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Docker

### Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð‘Ð” Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ

Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð² Ð¿Ð°Ð¿ÐºÐµ `./data/` Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ:
- âœ… Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð¼ÐµÐ¶Ð´Ñƒ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°Ð¼Ð¸
- âœ… ÐœÐ¾Ð¶Ð½Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿Ñ‹: `cp data/elia.db data/backup.db`
- âœ… ÐœÐ¾Ð¶Ð½Ð¾ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ: Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Docker â†’ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» â†’ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Docker

### Ð‘ÑÐºÐ°Ð¿ Ð‘Ð”

```bash
# ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±
cp data/elia.db data/elia_backup_$(date +%Y%m%d).db

# Ð˜Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· sqlite3
sqlite3 data/elia.db ".backup data/backup.db"
```

### Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð‘Ð”

```bash
docker-compose down
cp data/backup.db data/elia.db
docker-compose up -d
```

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ…ÐµÐ¼Ñ‹ Ð‘Ð” (Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸)

```bash
# Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker exec -it elia-platform bash

# Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
alembic upgrade head
```

## ðŸ“ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs -f

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ
docker-compose down

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker-compose restart

# Ð’Ð¾Ð¹Ñ‚Ð¸ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker exec -it elia-platform bash

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker-compose ps
```

## âš ï¸ Ð’Ð°Ð¶Ð½Ð¾

- Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð‘Ð”, Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ð»Ð¾Ð³Ð¸) Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ Ð² Ð¿Ð°Ð¿ÐºÐ°Ñ… `data/`, `static/uploads/`, `logs/`
- ÐŸÑ€Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ `docker-compose down` Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐÐ• ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ
- Ð¢Ð¾Ð»ÑŒÐºÐ¾ `docker-compose down -v` ÑƒÐ´Ð°Ð»Ð¸Ñ‚ volumes (ÐÐ• Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ ÑÑ‚Ð¾!)

## ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

```bash
git pull
docker-compose build
docker-compose up -d
# Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¾ÑÑ‚Ð°Ð½ÑƒÑ‚ÑÑ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ!
```

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ: ÑÐ¼. `DOCKER_GUIDE.md`

